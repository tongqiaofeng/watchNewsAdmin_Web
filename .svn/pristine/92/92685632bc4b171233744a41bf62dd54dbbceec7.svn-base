{"remainingRequest":"D:\\aa-tong\\my-projects\\beautySalon\\salon-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\aa-tong\\my-projects\\beautySalon\\salon-admin\\src\\utils\\quill.eeSourceBtn.js","dependencies":[{"path":"D:\\aa-tong\\my-projects\\beautySalon\\salon-admin\\src\\utils\\quill.eeSourceBtn.js","mtime":1609392336493},{"path":"D:\\aa-tong\\my-projects\\beautySalon\\salon-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\beautySalon\\salon-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOi9hYS10b25nL215LXByb2plY3RzL2JlYXV0eVNhbG9uL3NhbG9uLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRDovYWEtdG9uZy9teS1wcm9qZWN0cy9iZWF1dHlTYWxvbi9zYWxvbi1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwoKdmFyIGVlU291cmNlQnRuID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBlZVNvdXJjZUJ0bihxdWlsbCwgb3B0aW9ucykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIGVlU291cmNlQnRuKTsKCiAgICB2YXIgdGhlQ2xhc3MgPSB0aGlzOwogICAgdGhlQ2xhc3MuYWRkRG9tKHF1aWxsKTsKICAgIHF1aWxsLm9uKCd0ZXh0LWNoYW5nZScsIGZ1bmN0aW9uIChkZWx0YSwgb2xkRGVsdGEsIHNvdXJjZSkgewogICAgICB0aGVDbGFzcy5yZXBsYWNlU291cmNlRWRpdG9yQ29udGVudChxdWlsbCk7CiAgICB9KTsgLy9jcmVhdGUgYnRuCgogICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOyAvL2Rpc3BsYXkgYnV0dG9uIHRleHQKCiAgICBidXR0b24uaW5uZXJIVE1MID0gIj5fIjsKCiAgICBidXR0b24ub25jbGljayA9IGZ1bmN0aW9uICgpIHsKICAgICAgdGhlQ2xhc3Muc2hvd1NvdXJjZUVkaXRvcihxdWlsbCk7CiAgICB9OyAvL2NyZWF0ZSBidG4gY29udGFpbmVyCgoKICAgIHZhciBidXR0b25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICBidXR0b25Db250YWluZXIuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJxbC1mb3JtYXRzIGVlLWZsYWctc291cmNlIik7CiAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTsgLy9hZGQgdG8gdG9vbGJhcgoKICAgIHF1aWxsLmNvbnRhaW5lci5wcmV2aW91c1NpYmxpbmcuYXBwZW5kQ2hpbGQoYnV0dG9uQ29udGFpbmVyKTsKICB9IC8vYWRkIGRvbSBmb3Igc291cmNlIGVkaXRvcgoKCiAgX2NyZWF0ZUNsYXNzKGVlU291cmNlQnRuLCBbewogICAga2V5OiAiYWRkRG9tIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGREb20ocXVpbGwpIHsKICAgICAgaWYgKCFxdWlsbC5jb250YWluZXIucXVlcnlTZWxlY3RvcigiLnFsLWVlLXNvdXJjZSIpKSB7CiAgICAgICAgdmFyIHR4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpOwogICAgICAgIHR4dEFyZWEuc3R5bGUuY3NzVGV4dCA9ICJ3aWR0aDogMTAwJTttYXJnaW46IDBweDtiYWNrZ3JvdW5kOiByZ2IoMjksIDI5LCAyOSk7Ym94LXNpemluZzogYm9yZGVyLWJveDtjb2xvcjogcmdiKDIwNCwgMjA0LCAyMDQpO2ZvbnQtc2l6ZTogMTNweDtvdXRsaW5lOiBub25lO3BhZGRpbmc6IDEycHggMTVweDtsaW5lLWhlaWdodDogMS40Mjtmb250LWZhbWlseTogQ29uc29sYXMsIE1lbmxvLCBNb25hY28sICZxdW90O0NvdXJpZXIgTmV3JnF1b3Q7LCBtb25vc3BhY2U7cG9zaXRpb246IGFic29sdXRlO3RvcDogMDtib3R0b206IDA7Ym9yZGVyOiBub25lOyI7CiAgICAgICAgdmFyIGh0bWxFZGl0b3IgPSBxdWlsbC5hZGRDb250YWluZXIoJ3FsLWVlLXNvdXJjZScpOwogICAgICAgIGh0bWxFZGl0b3Iuc3R5bGUuY3NzVGV4dCA9ICJkaXNwbGF5Om5vbmUiOwogICAgICAgIGh0bWxFZGl0b3IuYXBwZW5kQ2hpbGQodHh0QXJlYSk7CiAgICAgIH0KICAgIH0gLy9mb3IgcXVpbGwgZWRpdG9yIHN3aXRjaAoKICB9LCB7CiAgICBrZXk6ICJyZXBsYWNlU291cmNlRWRpdG9yQ29udGVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVwbGFjZVNvdXJjZUVkaXRvckNvbnRlbnQocXVpbGwpIHsKICAgICAgdmFyIHF1aWxsRWRpdG9yID0gcXVpbGwuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoIi5xbC1lZGl0b3IiKTsKICAgICAgdmFyIHNvdXJjZUNvbnRhaW5lciA9IHF1aWxsLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCIucWwtZWUtc291cmNlIik7CiAgICAgIHZhciBzb3VyY2VFZGl0b3IgPSBzb3VyY2VDb250YWluZXIucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKTsKICAgICAgc291cmNlRWRpdG9yLnZhbHVlID0gcXVpbGxFZGl0b3IuaW5uZXJIVE1MOwogICAgfSAvL2FkZCBodG1sIERPTSwgc2hvdy9oaWRlLCBzYXZlIGV2ZW50CgogIH0sIHsKICAgIGtleTogInNob3dTb3VyY2VFZGl0b3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob3dTb3VyY2VFZGl0b3IocXVpbGwpIHsKICAgICAgLy8xLiBmaW5kIHF1aWxsIGVkaXRvcgogICAgICB2YXIgcXVpbGxFZGl0b3IgPSBxdWlsbC5jb250YWluZXIucXVlcnlTZWxlY3RvcigiLnFsLWVkaXRvciIpOwogICAgICB2YXIgc291cmNlQ29udGFpbmVyID0gcXVpbGwuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoIi5xbC1lZS1zb3VyY2UiKTsKICAgICAgdmFyIHNvdXJjZUVkaXRvciA9IHNvdXJjZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpOyAvLyBjb25zb2xlLmxvZyhzb3VyY2VFZGl0b3IpOwogICAgICAvL3Nob3cvaGlkZSBlZGl0b3IsIHZhbHVlIHRyYW5zZmVyCgogICAgICBpZiAoc291cmNlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykgewogICAgICAgIC8vc2hvdyBzb3VyY2UgZWRpdG9yCiAgICAgICAgc291cmNlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgICAgICBzb3VyY2VFZGl0b3IudmFsdWUgPSBxdWlsbEVkaXRvci5pbm5lckhUTUw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy9oaWRkZW4gc291cmNlIGRpdG9yCiAgICAgICAgc291cmNlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vc2V0IHNvdXJjZSBjb250ZW50IHRvIHF1aWxsIGVkaXRvcgoKICAgICAgICBxdWlsbEVkaXRvci5pbm5lckhUTUwgPSBzb3VyY2VFZGl0b3IudmFsdWU7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBlZVNvdXJjZUJ0bjsKfSgpOwoKd2luZG93LmVlU291cmNlQnRuID0gZWVTb3VyY2VCdG47CmV4cG9ydCBkZWZhdWx0IGVlU291cmNlQnRuOwpleHBvcnQgeyBlZVNvdXJjZUJ0biB9Ow=="},{"version":3,"sources":["D:/aa-tong/my-projects/beautySalon/salon-admin/src/utils/quill.eeSourceBtn.js"],"names":["eeSourceBtn","quill","options","theClass","addDom","on","delta","oldDelta","source","replaceSourceEditorContent","button","document","createElement","innerHTML","onclick","showSourceEditor","buttonContainer","setAttribute","appendChild","container","previousSibling","querySelector","txtArea","style","cssText","htmlEditor","addContainer","quillEditor","sourceContainer","sourceEditor","value","display","window"],"mappings":"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","sourcesContent":["class eeSourceBtn {\r\n  constructor(quill, options) {\r\n\r\n    let theClass = this;\r\n\r\n    theClass.addDom(quill);\r\n    quill.on('text-change', (delta, oldDelta, source) => {\r\n      theClass.replaceSourceEditorContent(quill)\r\n    })\r\n\r\n    //create btn\r\n    let button = document.createElement(\"button\");\r\n    //display button text\r\n    button.innerHTML = \">_\";\r\n    button.onclick = function () {\r\n      theClass.showSourceEditor(quill);\r\n    };\r\n\r\n    //create btn container\r\n    let buttonContainer = document.createElement(\"span\");\r\n    buttonContainer.setAttribute(\"class\", \"ql-formats ee-flag-source\");\r\n    buttonContainer.appendChild(button);\r\n\r\n    //add to toolbar\r\n    quill.container.previousSibling.appendChild(buttonContainer);\r\n\r\n  }\r\n\r\n  //add dom for source editor\r\n  addDom(quill) {\r\n    if (!quill.container.querySelector(\".ql-ee-source\")) {\r\n      var txtArea = document.createElement('textarea');\r\n      txtArea.style.cssText = \"width: 100%;margin: 0px;background: rgb(29, 29, 29);box-sizing: border-box;color: rgb(204, 204, 204);font-size: 13px;outline: none;padding: 12px 15px;line-height: 1.42;font-family: Consolas, Menlo, Monaco, &quot;Courier New&quot;, monospace;position: absolute;top: 0;bottom: 0;border: none;\"\r\n\r\n      var htmlEditor = quill.addContainer('ql-ee-source')\r\n      htmlEditor.style.cssText = \"display:none\";\r\n      htmlEditor.appendChild(txtArea)\r\n    }\r\n  }\r\n\r\n  //for quill editor switch\r\n  replaceSourceEditorContent(quill) {\r\n    let quillEditor = quill.container.querySelector(\".ql-editor\");\r\n    let sourceContainer = quill.container.querySelector(\".ql-ee-source\");\r\n    let sourceEditor = sourceContainer.querySelector('textarea');\r\n\r\n    sourceEditor.value = quillEditor.innerHTML;\r\n\r\n  }\r\n\r\n  //add html DOM, show/hide, save event\r\n  showSourceEditor(quill) {\r\n    //1. find quill editor\r\n    let quillEditor = quill.container.querySelector(\".ql-editor\");\r\n\r\n    let sourceContainer = quill.container.querySelector(\".ql-ee-source\");\r\n    let sourceEditor = sourceContainer.querySelector('textarea');\r\n    // console.log(sourceEditor);\r\n\r\n\r\n    //show/hide editor, value transfer\r\n    if (sourceContainer.style.display === 'none') {\r\n      //show source editor\r\n      sourceContainer.style.display = '';\r\n\r\n      sourceEditor.value = quillEditor.innerHTML;\r\n    } else {\r\n      //hidden source ditor\r\n      sourceContainer.style.display = 'none';\r\n\r\n      //set source content to quill editor\r\n      quillEditor.innerHTML = sourceEditor.value;\r\n    }\r\n\r\n  }\r\n\r\n}\r\n\r\nwindow.eeSourceBtn = eeSourceBtn;\r\nexport default eeSourceBtn;\r\nexport {\r\n  eeSourceBtn\r\n};"]}]}