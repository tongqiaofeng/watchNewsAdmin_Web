{"remainingRequest":"G:\\aa-tong\\my-project\\copy\\watchNewsAdmin_Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\aa-tong\\my-project\\copy\\watchNewsAdmin_Web\\src\\components\\add-news.vue?vue&type=style&index=0&id=0185e50f&scoped=true&lang=css&","dependencies":[{"path":"G:\\aa-tong\\my-project\\copy\\watchNewsAdmin_Web\\src\\components\\add-news.vue","mtime":1656922506890},{"path":"G:\\aa-tong\\my-project\\copy\\watchNewsAdmin_Web\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\aa-tong\\my-project\\copy\\watchNewsAdmin_Web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"G:\\aa-tong\\my-project\\copy\\watchNewsAdmin_Web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"G:\\aa-tong\\my-project\\copy\\watchNewsAdmin_Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\aa-tong\\my-project\\copy\\watchNewsAdmin_Web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KQGltcG9ydCB1cmwoInRpbnltY2Uvc2tpbnMvdWkvb3hpZGUvc2tpbi5taW4uY3NzIik7DQo="},{"version":3,"sources":["add-news.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA","file":"add-news.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <edit :init=\"init\" v-model=\"data\" id=\"tinymce\"></edit>\r\n</template>\r\n<script>\r\nimport edit from \"@tinymce/tinymce-vue\";\r\nimport \"tinymce/tinymce.min.js\";\r\nimport \"tinymce/themes/silver/theme.min.js\";\r\nimport \"tinymce/langs/zh_CN\";\r\nimport \"tinymce/icons/default/icons.min.js\";\r\n\r\n//引入插件\r\nimport \"tinymce/plugins/link/plugin.min.js\";\r\nimport \"tinymce/plugins/code/plugin.min.js\";\r\nimport \"tinymce/plugins/image/plugin.min.js\"; //图片上传需要\r\nimport \"tinymce/plugins/paste/plugin.min.js\"; //图片粘贴自动上传需要\r\nimport \"tinymce/plugins/media/plugin.min.js\";\r\nimport \"tinymce/plugins/table/plugin.min.js\";\r\nimport \"tinymce/plugins/lists/plugin.min.js\";\r\nimport \"tinymce/plugins/contextmenu/plugin.min.js\";\r\nimport \"tinymce/plugins/wordcount/plugin.min.js\";\r\nimport \"tinymce/plugins/textcolor/plugin.min.js\";\r\nimport \"tinymce/plugins/fullscreen/plugin.min.js\"; //全屏\r\nimport \"tinymce/plugins/searchreplace/plugin.min.js\";\r\nimport \"tinymce/plugins/emoticons/plugin.min\";\r\n\r\nexport default {\r\n  name: \"EditorTinymce\",\r\n  components: {\r\n    edit,\r\n  },\r\n  props: {\r\n    value: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    content: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    plugins: {\r\n      type: [String, Array],\r\n      default:\r\n        \"link lists image code table textcolor wordcount contextmenu paste media fullscreen searchreplace \",\r\n    },\r\n    toolbar: {\r\n      type: [String, Array],\r\n      default:\r\n        \"undo redo |fontsizeselect  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | lists image media table | removeformat |　paste | code | fullscreen | searchreplace \",\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      data: this.content, //文本数据\r\n      init: {\r\n        language: \"zh_CN\",\r\n        height: 600,\r\n        menubar: \"false\", //菜单栏\r\n        branding: false, //禁用右下角标识字符串\r\n        paste_retain_style_properties: \"all\", //粘贴保留所有格式\r\n        paste_data_images: true, // 允许粘贴图像，图片粘贴自动上传需要\r\n        // 图片上传回调函数\r\n        images_upload_handler: this.imagesUploadHandler,\r\n        plugins: this.plugins,\r\n        toolbar: this.toolbar,\r\n      },\r\n    };\r\n  },\r\n\r\n  beforeDestroy() {\r\n    // 销毁tinymce\r\n    this.$emit(\"on-destroy\");\r\n    window.tinymce.remove(document.getElementById(\"tinymce\"));\r\n  },\r\n  methods: {\r\n    setContent(val) {\r\n      this.data = val;\r\n    },\r\n    getContent() {\r\n      return this.data;\r\n    },\r\n    imagesUploadHandler(blobInfo, success, failure, progress) {\r\n      console.log(\"图片上传\");\r\n      var xhr, formData;\r\n      var file = blobInfo.blob(); //转化为易于理解的file对象\r\n      xhr = new XMLHttpRequest();\r\n      xhr.withCredentials = false;\r\n\r\n      xhr.open(\"POST\", \"your imgUrl\");\r\n      xhr.setRequestHeader(\"Authorization\", \"token\");\r\n\r\n      xhr.onload = function() {\r\n        var json = JSON.parse(xhr.responseText);\r\n        console.log(json);\r\n\r\n        if (json.code != 200) {\r\n          const img = \"data:image/jpeg;base64,\" + blobInfo.base64();\r\n          success(json.url);\r\n          return;\r\n        }\r\n        success(json.url);\r\n      };\r\n\r\n      formData = new FormData();\r\n      formData.append(\"file\", file, file.name);\r\n      xhr.send(formData);\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n@import url(\"tinymce/skins/ui/oxide/skin.min.css\");\r\n</style>\r\n"]}]}